window.log=function(){var e;log.history=log.history||[],log.history.push(arguments),this.console&&((e=arguments).callee=e.callee.caller,e=[].slice.call(e),"object"==typeof console.log?log.apply.call(console.log,console,e):console.log.apply(console,e))},function(){var o=jQuery.noConflict(!0);o(function(){function e(){}e.prototype.getTranslation=function(e,r){void 0===r&&(r=!0);e=o('.bgc_error_translations div[data-error-key="'+e+'"]').eq(0).text();return r?"<ul><li>"+e+"</li></ul>":e},e.prototype.getErrorDummy=function(e){return"<ul><li>"+e+"</li></ul>"},o.validator.addMethod("notEqualTo",function(e,r,t){return this.optional(r)||e!=o(t).val()},"Username must be different from password."),o.validator.addMethod("noSpecialChars",function(e,r){return this.optional(r)||!/[ <>@+'&%;:,//?]/i.test(e)&&-1===e.indexOf("--")}),o.validator.addMethod("validDate",function(e,r){var t,e=e.split("."),a=parseInt(e[0],10),s=parseInt(e[1],10),e=parseInt(e[2],10);return(t=0<s&&s<13&&0<e&&e<32768&&0<a&&a<=new Date(e,s,0).getDate())&&(isInFuture=new Date(e,s-1,a)>new Date),this.optional(r)||t&&!isInFuture}),o.validator.addMethod("emailBgc",function(e,r){var t=new RegExp("^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9üäöÜÄÖ]([-_\\.]?[a-zA-Z0-9üäöÜÄÖ])+\\.[a-zA-Z]{2,}$");return this.optional(r)||t.test(e)}),e.prototype.initFormValidation=function(){var s=this;o(".bgcdw_date_fields select").on("change",function(e){s.copyDateToHiddenField();var r=o("#bgc_sudc_birthdate_form").validate().element("#birthdateValidate"),t=o("#birthdateValidate").prevAll(".bgcdw_date_fields"),a="bgcdw_errors_date";!1===r?t.addClass(a):t.removeClass(a)}),o("#bgc_sudc_initialemail_form").validate({errorClass:"bgcdw_errors",errorElement:"div",onkeyup:function(e){o(e).hasClass("bgcdw_errors")&&o(e).valid()},rules:{email:{emailBgc:!0,email:!1,required:!0},password:{required:!0}},messages:{email:{required:this.getTranslation("accountcenter.error.email"),emailBgc:this.getTranslation("accountcenter.error.email")},password:{required:this.getTranslation("accountcenter.error.password")}}}),o("#bgc_sudc_email_form").validate({errorClass:"bgcdw_errors",errorElement:"div",onkeyup:function(e){o(e).hasClass("bgcdw_errors")&&o(e).valid()},rules:{email:{emailBgc:!0,email:!1,required:!0}},messages:{email:{required:this.getTranslation("accountcenter.error.email"),emailBgc:this.getTranslation("accountcenter.error.email")}}}),o("#bgc_sudc_facebook_form").validate({errorClass:"bgcdw_errors",errorElement:"div",onkeyup:function(e){o(e).hasClass("bgcdw_errors")&&o(e).valid()},rules:{facebookDisconnect:{required:!0}},messages:{facebookDisconnect:{required:this.getTranslation("accountcenter.error.checkbox")}}}),o("#bgc_sudc_password_form").validate({errorClass:"bgcdw_errors",errorElement:"div",onkeyup:function(e){o(e).hasClass("bgcdw_errors")&&o(e).valid()},rules:{password:{required:!0,minlength:4},passwordTwo:{required:!0,equalTo:"#bgc_sudc_password_form_password"}},messages:{password:{minlength:this.getTranslation("accountcenter.error.password_min"),required:this.getTranslation("accountcenter.error.password")},passwordTwo:{required:this.getTranslation("accountcenter.error.password_repeat"),equalTo:this.getTranslation("accountcenter.error.password_mismatch")}}}),o("#bgc_sudc_passwordreminder_form").validate({errorClass:"bgcdw_errors",errorElement:"div",onkeyup:function(e){o(e).hasClass("bgcdw_errors")&&o(e).valid()},rules:{username:{required:!0}},messages:{username:{required:this.getTranslation("accountcenter.error.username")}}}),o("#bgc_sudc_usernamereminder_form").validate({errorClass:"bgcdw_errors",errorElement:"div",onkeyup:function(e){o(e).hasClass("bgcdw_errors")&&o(e).valid()},rules:{email:{required:!0,emailBgc:!0,email:!1}},messages:{email:{required:this.getTranslation("accountcenter.error.email"),emailBgc:this.getTranslation("accountcenter.error.email")}}}),o("#bgc_sudc_birthdate_form").validate({errorClass:"bgcdw_errors",errorElement:"div",onsubmit:!0,ignore:"",rules:{birthdateValidate:{validDate:!0}},messages:{birthdateValidate:{validDate:this.getTranslation("accountcenter.error.birthdate")}}})},e.prototype.copyDateToHiddenField=function(){var e=o('select[name="birthdateDay"]').val()+"."+o('select[name="birthdateMonth"]').val()+"."+o('select[name="birthdateYear"]').val();o("#birthdateValidate").val(e)},e.prototype.moveFlashErrors=function(){var e=o(".bgcdw_errors_flash");0<e.length&&(e.removeClass("bgcdw_errors_flash"),e.addClass("bgcdw_errors"),o(".bgcdw_submit .controls").first().prepend(e))},e.prototype.resizeNavigationFont=function(){o(".nav-list span").each(function(){var e=o("#settings-navigation").width()<100;16<o(this).text().length&&!e&&(o(this).css("font-size","12px"),o(this).find("i").css("font-size","14px"))})},e.prototype.useMediaQueriesFallback=function(){function e(e){var r=o("#fallback-narrow"),t=o("#fallback-custom-narrow"),e=parseInt(e),a=o("#customCssNarrow").attr("href"),e=e<1200;e?(r.attr("href","/assets/css/accountcenter-narrow.css"),t.attr("href",a)):(r.attr("href",""),t.attr("href","")),"rtl"===o("body").css("direction")&&e?o("#settings-main").addClass("rtl"):o("#settings-main").removeClass("rtl")}e(o(window).width()),o(window).on("resize",function(){e(o(window).width())})};var r=new e,t=(r.initFormValidation(),Modernizr.mq("only all")),a=o("body").css("direction"),t=(t&&"rtl"!==a||r.useMediaQueriesFallback(),o("input.pwmeter")),a=(0<t.length&&(a={strengthLabels:{strength1:r.getTranslation("accountcenter.password.strength1",!1),strength2:r.getTranslation("accountcenter.password.strength2",!1),strength3:r.getTranslation("accountcenter.password.strength3",!1),strength4:r.getTranslation("accountcenter.password.strength4",!1)}},t.pwbar(a),t.trigger("change")),o("div.bgcdw_errors").each(function(){var e=o(this),r=e.prevAll("input"),t=e.prevAll("textarea"),a=e.prevAll("select"),s=r.attr("id");e.attr("for",s),e.attr("generated","true"),r.addClass("bgcdw_errors"),t.addClass("bgcdw_errors"),a.addClass("bgcdw_errors")}),r.resizeNavigationFont(),o(window).on("resize",function(){r.resizeNavigationFont()}),r.moveFlashErrors(),r.getTranslation("accountcenter.common.logout",!1));o(".navbar-logout").attr("title",a),o(".disabled-after-click").on("click",function(e){var r="javascript:void(0)",t=o(e.currentTarget).attr("href");t!==r&&(o(e.target).attr("href",r),location.href=t)}),o("#toggle-button").toggleButtons({width:150,animated:!0,label:{enabled:r.getTranslation("accountcenter.common.yes",!1),disabled:r.getTranslation("accountcenter.common.no",!1)}}),r.copyDateToHiddenField(),o("#bgc_sudc_initialemail_form").on("submit",function(){sessionStorage.setItem("bp_accountcenter_email",o("#bgc_sudc_email_form_email").val())})}),o.fn.extend({pwbar:function(n){return this.each(function(){var s=o(this);s.complexify({strengthScaleFactor:.5},function(e,r){strengthText=0<r&&r<=25?n.strengthLabels.strength1:25<r&&r<=50?n.strengthLabels.strength2:50<r&&r<=75?n.strengthLabels.strength3:75<r&&r<=100?n.strengthLabels.strength4:"",0===o(".bgcdw_pwstrength_wrapper").length&&(t=s.parent()).prepend('<div class="bgcdw_pwstrength_wrapper"><div class="bgcdw_pwstrength_bar_bg"><div class="bgcdw_pwstrength_bar"></div></div><div class="bgcdw_pwstrength_bar_text"></div></div>');var t,a=parseInt(o(".bgcdw_pwstrength_bar_bg",t).css("width"))/100;0<r?o(".bgcdw_pwstrength_bar_bg").show():o(".bgcdw_pwstrength_bar_bg").hide(),o(".bgcdw_pwstrength_bar",t).css("width",r*a+"px"),o(".bgcdw_pwstrength_bar").css("display","block"),o(".bgcdw_pwstrength_bar_text",t).text(strengthText)})})}})}(jQuery);