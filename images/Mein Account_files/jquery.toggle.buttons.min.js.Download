!function(u){"use strict";u.fn.toggleButtons=function(t){var a,d,l,r=.05,e={init:function(t){return this.each(function(){function e(t){t.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")}var i,s,o,n,c={};(a=u(this)).addClass("toggle-button"),u.each(a.data(),function(t,e){var i={};if(0===t.indexOf("togglebutton")){t=t.match(/[A-Z][a-z]+/g);for(var t=u.map(t,function(t){return t.toLowerCase()}),s=i,n=t,o=e,a=0,d=n.length;a<d;a++)s=s[n[a]]=s[n[a]]||a==d-1?o:{};c=u.extend(!0,c,i)}}),o=u.extend(!0,{},u.fn.toggleButtons.defaults,t,c),u(this).data("options",o),i=u("<span></span>").addClass("labelLeft").text(void 0===o.label.enabled?"ON":o.label.enabled),s=u("<span></span>").addClass("labelRight").text(void 0===o.label.disabled?"OFF ":o.label.disabled),l=a.find("input:checkbox"),(d=l.wrap(u("<div></div>")).parent()).append(i),d.append(u("<label></label>").attr("for",l.attr("id")||"")),d.append(s),l.is(":checked")?a.find(">div").css("left","0"):a.find(">div").css("left","-50%"),o.animated?void 0!==o.transitionspeed&&(r=/^(\d*%$)/.test(o.transitionspeed)?.05*parseInt(o.transitionspeed)/100:o.transitionspeed):r=0,u(this).data("transitionSpeed",1e3*r),o.width/=2,a.css("width",2*o.width).find(">div").css("width",3*o.width).find(">span, >label").css("width",o.width),a.css("height",o.height).find("span, label").css("height",o.height).filter("span").css("line-height",o.height+"px"),l.is(":disabled")&&u(this).addClass("deactivate"),a.find("span").css(o.font),void 0===o.style.enabled?void 0!==o.style.custom&&void 0!==o.style.custom.enabled&&void 0!==o.style.custom.enabled.background&&(i.css("color",o.style.custom.enabled.color),void 0===o.style.custom.enabled.gradient?i.css("background",o.style.custom.enabled.background):u.each(["-webkit-","-moz-","-o-",""],function(t,e){i.css("background-color",o.style.custom.enabled.background),i.css("background-image",e+"linear-gradient(top, "+o.style.custom.enabled.background+","+o.style.custom.enabled.gradient+")")})):i.addClass(o.style.enabled),void 0===o.style.disabled?void 0!==o.style.custom&&void 0!==o.style.custom.disabled&&void 0!==o.style.custom.disabled.background&&(s.css("color",o.style.custom.disabled.color),void 0===o.style.custom.disabled.gradient?s.css("background",o.style.custom.disabled.background):u.each(["-webkit-","-moz-","-o-",""],function(t,e){s.css("background-color",o.style.custom.disabled.background),s.css("background-image",e+"linear-gradient(top, "+o.style.custom.disabled.background+","+o.style.custom.disabled.gradient+")")})):s.addClass(o.style.disabled);i.on("click",function(t){e(u(this))}),s.on("click",function(t){e(u(this))}),a.find("input:checkbox").on("change",function(t,e){var i=u(this).parent(),s=u(this).is(":checked"),n=u(this).closest(".toggle-button");i.stop().animate({left:s?"0":"-50%"},n.data("transitionSpeed")),o=n.data("options"),e||o.onChange(i,s,t)}),a.find("label").on("mousedown touchstart",function(t){n=!1,t.preventDefault(),t.stopImmediatePropagation(),u(this).closest(".toggle-button").is(".deactivate")?u(this).off("click"):(u(this).on("mousemove touchmove",function(t){var e=u(this).closest(".toggle-button"),i=((t.pageX||t.originalEvent.targetTouches[0].pageX)-e.offset().left)/(2*o.width)*100;n=!0,t.stopImmediatePropagation(),t.preventDefault(),i<25?i=25:75<i&&(i=75),e.find(">div").css("left",i-75+"%")}),u(this).on("click touchend",function(t){var e=u(t.target).siblings("input:checkbox");t.stopImmediatePropagation(),t.preventDefault(),u(this).off("mouseleave"),n?parseInt(u(this).parent().css("left"))<-25?e.attr("checked",!1):e.attr("checked",!0):e.attr("checked",!e.is(":checked")),e.trigger("change")}),u(this).on("mouseleave",function(t){var e=u(this).siblings("input:checkbox");t.preventDefault(),t.stopImmediatePropagation(),u(this).off("mouseleave"),u(this).trigger("mouseup"),parseInt(u(this).parent().css("left"))<-25?e.attr("checked",!1):e.attr("checked",!0),e.trigger("change")}),u(this).on("mouseup",function(t){t.stopImmediatePropagation(),t.preventDefault(),u(this).off("mousemove")}))})}),this},toggleActivation:function(){u(this).toggleClass("deactivate")},toggleState:function(t){var e=u(this).find("input:checkbox");e.attr("checked",!e.is(":checked")).trigger("change",t)},setState:function(t,e){u(this).find("input:checkbox").attr("checked",t).trigger("change",e)},status:function(){return u(this).find("input:checkbox").is(":checked")},destroy:function(){var t=u(this).find("div");return t.find(":not(input:checkbox)").remove(),(t=t.children()).unwrap().unwrap(),t.unbind("change"),t}};return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void u.error("Method "+t+" does not exist!"):e.init.apply(this,arguments)},u.fn.toggleButtons.defaults={onChange:function(){},width:100,height:25,font:{},animated:!0,transitionspeed:void 0,label:{enabled:void 0,disabled:void 0},style:{enabled:void 0,disabled:void 0,custom:{enabled:{background:void 0,gradient:void 0,color:"#FFFFFF"},disabled:{background:void 0,gradient:void 0,color:"#FFFFFF"}}}}}(jQuery);